<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beame AI Analysis - Transform Your Smile</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body class="app-body">
    <!-- Navigation Bar (Consistent with Landing Page) -->
    <nav class="fixed-top">
        <div class="navbar-container">
            <div class="logo-container">
                <a href="../landing/index.html" class="logo">be@me</a>
            </div>
            <div class="nav-right">
                <div class="language-switcher">
                    <button class="lang-btn" data-lang="zh" id="lang-zh">‰∏≠Êñá</button>
                    <button class="lang-btn" data-lang="en" id="lang-en">EN</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="app-container">
        <header class="app-header">
            <h1 data-en="AI Smile Analysis" data-zh="AI Á¨ëÂÆπÂàÜÊûê">AI Smile Analysis</h1>
            <p class="subtitle" data-en="Let our AI guide your transformation" data-zh="ËÆìÊàëÂÄëÁöÑ AI ÂºïÂ∞éÊÇ®ÁöÑËΩâËÆä">Let our AI guide your transformation</p>
        </header>

        <main class="app-main">
            <!-- Camera / Scanning Section -->
            <div class="scanning-section" id="webcamSection">
                <div class="camera-card">
                    <div class="video-container">
                        <video id="webcam" autoplay playsinline muted></video>
                        <canvas id="output" class="output-canvas"></canvas>
                        
                        <!-- Start Overlay -->
                        <div id="cameraStartOverlay" class="camera-start-overlay">
                            <div class="start-content">
                                <div class="start-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="start-icon-svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z" />
                                    </svg>
                                </div>
                                <h2 data-en="Tap to start camera" data-zh="ÈªûÊìäÂïüÂãïÊîùÂÉèÈ†≠">Tap to start camera</h2>
                                <p data-en="Allow camera access to analyze your smile" data-zh="ÂÖÅË®±Ë®™ÂïèÊîùÂÉèÈ†≠‰ª•ÂàÜÊûêÊÇ®ÁöÑÁ¨ëÂÆπ">Allow camera access to analyze your smile</p>
                            </div>
                        </div>
                        
                        <!-- Intelligent HUD Overlay -->
                        <div class="camera-hud">
                            <div class="hud-top">
                                <div class="status-badge" id="cameraStatusBadge">
                                    <span class="status-dot"></span>
                                    <span id="cameraStatus" data-en="Initializing..." data-zh="Ê≠£Âú®ÂïüÂãï...">Initializing...</span>
                                </div>
                            </div>
                            <div class="hud-center">
                            </div>
                            <div class="hud-bottom">
                                <!-- Removed mouth-instruction from here to avoid blocking camera view -->
                            </div>
                        </div>
                    </div>

                    <div class="camera-controls">
                        <button id="captureBtn" class="btn-capture" disabled>
                            <div class="btn-capture-inner"></div>
                        </button>
                        <span class="btn-label" data-en="Capture" data-zh="ÊãçÊîù">Capture</span>
                    </div>
                </div>

                <!-- Live Status Panel -->
                <div class="app-status-panel" id="statusPanel">
                    <div class="status-pill">
                        <span class="label" data-en="FACE DETECTION" data-zh="Èù¢ÈÉ®Ê™¢Ê∏¨">FACE DETECTION</span>
                        <span class="value" id="faceStatus" data-en="Waiting..." data-zh="Á≠âÂæÖ‰∏≠...">Waiting...</span>
                    </div>
                    <div class="status-pill">
                        <span class="label" data-en="ALIGNMENT" data-zh="ÊéíÂàóÂàÜÊûê">ALIGNMENT</span>
                        <span class="value" id="analysisStatus" data-en="Ready" data-zh="Â∞±Á∑í">Ready</span>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <!-- Result Navigation -->
                <div class="results-header">
                    <div class="result-steps">
                        <div class="res-step active" id="step1">
                            <span class="num">1</span>
                            <span class="txt" data-en="AI Generation" data-zh="AI ÁîüÊàê">AI Generation</span>
                        </div>
                        <div class="res-step-line"></div>
                        <div class="res-step" id="step2">
                            <span class="num">2</span>
                            <span class="txt" data-en="Detailed Report" data-zh="Ë©≥Á¥∞Â†±Âëä">Detailed Report</span>
                        </div>
                    </div>
                </div>

                <!-- Tab Navigation -->
                <div class="app-tabs">
                    <button class="tab-item active" data-tab="preview" onclick="switchTab('preview')">
                        <span class="icon">üì∏</span>
                        <span class="label" data-en="AI Preview" data-zh="AI È†êË¶Ω">AI Preview</span>
                    </button>
                    <button class="tab-item disabled" data-tab="plan" onclick="switchTab('plan')" id="planTabBtn" disabled>
                        <span class="icon">üìã</span>
                        <span class="label" data-en="Treatment" data-zh="Ê≤ªÁôÇÊñπÊ°à">Treatment</span>
                    </button>
                    <button class="tab-item disabled" data-tab="3d" onclick="switchTab('3d')" id="3dTabBtn" disabled>
                        <span class="icon">ü¶∑</span>
                        <span class="label" data-en="Photo Scan" data-zh="ÊãçÊîùÊéÉÊèè">Photo Scan</span>
                    </button>
                </div>

                <!-- Tab Content -->
                <div class="app-tab-content">
                    <!-- Tab 1: AI Preview -->
                    <div class="tab-pane active" id="tab-preview">
                        <div class="preview-comparison">
                            <div class="comparison-grid">
                                <div class="img-box">
                                    <span class="tag" data-en="Original" data-zh="ÂéüÂßãÁÖßÁâá">Original</span>
                                    <div class="img-wrap">
                                        <img id="originalImage" alt="Original">
                                    </div>
                                </div>
                                <div class="comparison-arrow">‚Üí</div>
                                <div class="img-box result">
                                    <span class="tag primary" data-en="AI Result" data-zh="AI ÊïàÊûú">AI Result</span>
                                    <div class="img-wrap">
                                        <div class="processing-loader" id="processingIndicator">
                                            <div class="scanner-line"></div>
                                            <p id="analysisStep">Analyzing...</p>
                                        </div>
                                        <img id="straightenedImage" alt="Result" style="display: none;">
                                    </div>
                                </div>
                            </div>
                            <div class="ai-notice">
                                <span class="icon">üí°</span>
                                <p data-en="This is an AI-generated simulation. Results may vary after clinical review." 
                                   data-zh="ÈÄôÊòØ AI ÁîüÊàêÁöÑÊ®°Êì¨ÊïàÊûú„ÄÇÂØ¶ÈöõÁµêÊûúÂèØËÉΩÂú®Ëá®Â∫äÂØ©Ê†∏ÂæåÊúâÊâÄ‰∏çÂêå„ÄÇ">
                                   This is an AI-generated simulation. Results may vary after clinical review.
                                </p>
                            </div>
                        </div>
                        
                        <div class="actions-row">
                            <button id="downloadBtn" class="btn-app btn-outline" style="display: none;">
                                <span data-en="üíæ Save Photo" data-zh="üíæ ‰øùÂ≠òÁÖßÁâá">üíæ Save Photo</span>
                            </button>
                            <button id="retryBtn" class="btn-app btn-primary">
                                <span data-en="üì∏ New Scan" data-zh="üì∏ ÈáçÊñ∞ÊéÉÊèè">üì∏ New Scan</span>
                            </button>
                        </div>
                    </div>

                    <!-- Tab 2: Treatment Plan -->
                    <div class="tab-pane" id="tab-plan">
                        <div class="plan-report">
                            <div class="details-section" id="aiAssessmentSection">
                                <h4 data-en="AI Assessment" data-zh="AI ÂàùÊ≠•Ë©ï‰º∞">AI Assessment</h4>

                                <div class="ai-notice">
                                    <span class="icon">‚ö†Ô∏è</span>
                                    <p data-en="This is an AI-based assessment from a photo and is not a medical diagnosis. A dentist/orthodontist can provide the best assessment and confirm next steps."
                                       data-zh="Ê≠§ÁÇ∫Âü∫ÊñºÁÖßÁâáÁöÑ AI ÂàùÊ≠•Ë©ï‰º∞Ôºå‰∏¶ÈùûÈÜ´ÁôÇË®∫Êñ∑„ÄÇÁâôÈÜ´ÔºèÁüØÊ≠£Â∞àÁßëÈÜ´Â∏´ÂèØÊèê‰æõÊúÄ‰Ω≥Ë©ï‰º∞‰∏¶Á¢∫Ë™ç‰∏ã‰∏ÄÊ≠•„ÄÇ">
                                       This is an AI-based assessment from a photo and is not a medical diagnosis. A dentist/orthodontist can provide the best assessment and confirm next steps.
                                    </p>
                                </div>

                                <div class="case-status">
                                    <span class="case-chip" id="assessmentCaseChip">...</span>
                                    <span class="case-meta" id="assessmentMeta"></span>
                                </div>

                                <div class="case-cards" id="caseCards">
                                    <div class="case-card" id="caseCard-MILD" data-case="MILD">
                                        <div class="case-head">
                                            <h3 data-en="Mild alignment pattern" data-zh="ËºïÂ∫¶ÊéíÂàóÂûãÊÖã">Mild alignment pattern</h3>
                                            <span class="urgency low" data-en="Low urgency" data-zh="‰ΩéÁ∑äÊÄ•Â∫¶">Low urgency</span>
                                        </div>
                                        <p class="case-desc"
                                           data-en="Your photo looks consistent with minor crowding/spacing or mild rotation. Many mild cases can be aligner-friendly, but a clinician should confirm."
                                           data-zh="ÊÇ®ÁöÑÁÖßÁâáÁúãËµ∑‰æÜÂÉèÊòØËºïÂæÆÊìÅÊì†ÔºèÈñìÈöôÊàñËºïÂ∫¶Êâ≠ËΩâ„ÄÇË®±Â§öËºïÂ∫¶ÊÉÖÊ≥ÅÂèØËÉΩÈÅ©ÂêàÈö±ÂΩ¢ÁâôÂ•óÔºå‰ΩÜ‰ªçÈúÄËá®Â∫äÁ¢∫Ë™ç„ÄÇ">
                                           Your photo looks consistent with minor crowding/spacing or mild rotation. Many mild cases can be aligner-friendly, but a clinician should confirm.
                                        </p>
                                        <ul class="case-list">
                                            <li data-en="Next: take 3 photos (front, left, right) in good lighting for a more complete review."
                                                data-zh="‰∏ã‰∏ÄÊ≠•ÔºöÂú®ËâØÂ•ΩÂÖâÁ∑ö‰∏ãÊãçÊîù 3 ÂºµÁÖßÁâáÔºàÊ≠£Èù¢„ÄÅÂ∑¶ÂÅ¥„ÄÅÂè≥ÂÅ¥ÔºâÔºå‰ª•‰æøÊõ¥ÂÆåÊï¥Ë©ï‰º∞„ÄÇ">
                                                Next: take 3 photos (front, left, right) in good lighting for a more complete review.
                                            </li>
                                            <li data-en="Book a consult within the next 2‚Äì4 weeks to confirm fit and treatment options."
                                                data-zh="Âª∫Ë≠∞Êñº 2‚Äì4 ÈÄ±ÂÖßÈ†êÁ¥ÑË´ÆË©¢ÔºåÁ¢∫Ë™çÈÅ©ÈÖçÂ∫¶ËàáÊ≤ªÁôÇÈÅ∏È†Ö„ÄÇ">
                                                Book a consult within the next 2‚Äì4 weeks to confirm fit and treatment options.
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="case-card" id="caseCard-MODERATE" data-case="MODERATE">
                                        <div class="case-head">
                                            <h3 data-en="Moderate alignment pattern" data-zh="‰∏≠Â∫¶ÊéíÂàóÂûãÊÖã">Moderate alignment pattern</h3>
                                            <span class="urgency medium" data-en="Medium urgency" data-zh="‰∏≠Á≠âÁ∑äÊÄ•Â∫¶">Medium urgency</span>
                                        </div>
                                        <p class="case-desc"
                                           data-en="Your photo may show moderate crowding/rotation/spacing. This often benefits from an orthodontic plan and may require attachments/IPR."
                                           data-zh="ÊÇ®ÁöÑÁÖßÁâáÂèØËÉΩÂëàÁèæ‰∏≠Â∫¶ÊìÅÊì†ÔºèÊâ≠ËΩâÔºèÈñìÈöô„ÄÇÈÄöÂ∏∏ÈúÄË¶ÅÁüØÊ≠£Ë®àÁï´Ôºå‰∏¶ÂèØËÉΩÈúÄË¶ÅÈôÑ‰ª∂Êàñ‰øÆÁ£®ÔºàIPRÔºâ„ÄÇ">
                                           Your photo may show moderate crowding/rotation/spacing. This often benefits from an orthodontic plan and may require attachments/IPR.
                                        </p>
                                        <ul class="case-list">
                                            <li data-en="Next: book a consult within 1‚Äì2 weeks for an in-depth assessment."
                                                data-zh="‰∏ã‰∏ÄÊ≠•ÔºöÂª∫Ë≠∞Êñº 1‚Äì2 ÈÄ±ÂÖßÈ†êÁ¥ÑË´ÆË©¢ÔºåÈÄ≤Ë°åÊõ¥Ê∑±ÂÖ•Ë©ï‰º∞„ÄÇ">
                                                Next: book a consult within 1‚Äì2 weeks for an in-depth assessment.
                                            </li>
                                            <li data-en="If you have jaw clicking, bite discomfort, or headaches, mention it during your consult."
                                                data-zh="Ëã•ÊúâÈ°≥È°éÈóúÁØÄÂñÄÂñÄËÅ≤„ÄÅÂí¨Âêà‰∏çÈÅ©ÊàñÈ†≠ÁóõÔºåË´ãÂú®Ë´ÆË©¢ÊôÇÂëäÁü•„ÄÇ">
                                                If you have jaw clicking, bite discomfort, or headaches, mention it during your consult.
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="case-card" id="caseCard-COMPLEX" data-case="COMPLEX">
                                        <div class="case-head">
                                            <h3 data-en="Complex orthodontic pattern" data-zh="Ë§áÈõúÁüØÊ≠£ÂûãÊÖã">Complex orthodontic pattern</h3>
                                            <span class="urgency high" data-en="Higher urgency" data-zh="ËºÉÈ´òÁ∑äÊÄ•Â∫¶">Higher urgency</span>
                                        </div>
                                        <p class="case-desc"
                                           data-en="Your photo may suggest a more complex alignment/bite pattern (e.g., severe crowding, significant bite issues). These cases often need an orthodontist-led plan."
                                           data-zh="ÊÇ®ÁöÑÁÖßÁâáÂèØËÉΩÈ°ØÁ§∫ËºÉË§áÈõúÁöÑÊéíÂàóÔºèÂí¨ÂêàÂûãÊÖãÔºà‰æãÂ¶ÇÂö¥ÈáçÊìÅÊì†„ÄÅÊòéÈ°ØÂí¨ÂêàÂïèÈ°åÔºâ„ÄÇÊ≠§È°ûÊÉÖÊ≥ÅÈÄöÂ∏∏ÈúÄË¶ÅÁüØÊ≠£Â∞àÁßëÈÜ´Â∏´‰∏ªÂ∞éË¶èÂäÉ„ÄÇ">
                                           Your photo may suggest a more complex alignment/bite pattern (e.g., severe crowding, significant bite issues). These cases often need an orthodontist-led plan.
                                        </p>
                                        <ul class="case-list">
                                            <li data-en="Next: schedule an orthodontic consult soon (ideally within 7‚Äì14 days)."
                                                data-zh="‰∏ã‰∏ÄÊ≠•ÔºöÂª∫Ë≠∞Áõ°Âø´ÂÆâÊéíÁüØÊ≠£Ë´ÆË©¢ÔºàÁêÜÊÉ≥ÁÇ∫ 7‚Äì14 Â§©ÂÖßÔºâ„ÄÇ">
                                                Next: schedule an orthodontic consult soon (ideally within 7‚Äì14 days).
                                            </li>
                                            <li data-en="You may need in-person records (x‚Äërays/scan) to confirm whether aligners or braces are appropriate."
                                                data-zh="ÂèØËÉΩÈúÄË¶ÅÈù¢Ë®∫Ë≥áÊñôÔºàX ÂÖâÔºèÂè£ÊéÉÔºâ‰ª•Á¢∫Ë™çÊòØÂê¶ÈÅ©ÂêàÈö±ÂΩ¢ÁâôÂ•óÊàñÈúÄÂÇ≥Áµ±ÁüØÊ≠£„ÄÇ">
                                                You may need in-person records (x‚Äërays/scan) to confirm whether aligners or braces are appropriate.
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="case-card" id="caseCard-URGENT" data-case="URGENT">
                                        <div class="case-head">
                                            <h3 data-en="Possible urgent dental concern" data-zh="ÂèØËÉΩÊúâÁ∑äÊÄ•ÁâôÁßëÁãÄÊ≥Å">Possible urgent dental concern</h3>
                                            <span class="urgency urgent" data-en="Urgent" data-zh="Á∑äÊÄ•">Urgent</span>
                                        </div>
                                        <p class="case-desc"
                                           data-en="Your photo may show signs that should be evaluated promptly (e.g., swelling, bleeding, infection/trauma concerns). Please seek professional care."
                                           data-zh="ÊÇ®ÁöÑÁÖßÁâáÂèØËÉΩÂá∫ÁèæÈúÄË¶ÅÁõ°Âø´Ë©ï‰º∞ÁöÑË∑°Ë±°Ôºà‰æãÂ¶ÇËÖ´ËÑπ„ÄÅÂá∫Ë°Ä„ÄÅÊÑüÊüìÔºèÂ§ñÂÇ∑ÁñëÊÖÆÔºâ„ÄÇË´ãÂÑòÈÄüÂ∞±ÈÜ´„ÄÇ">
                                           Your photo may show signs that should be evaluated promptly (e.g., swelling, bleeding, infection/trauma concerns). Please seek professional care.
                                        </p>
                                        <ul class="case-list">
                                            <li data-en="Next: contact a dentist within 24‚Äì48 hours. If you have fever, spreading swelling, severe pain, or difficulty swallowing/breathing, seek emergency care."
                                                data-zh="‰∏ã‰∏ÄÊ≠•ÔºöË´ãÂú® 24‚Äì48 Â∞èÊôÇÂÖßËÅØÁµ°ÁâôÈÜ´„ÄÇËã•ÊúâÁôºÁáí„ÄÅËÖ´ËÑπÊì¥Êï£„ÄÅÂäáÁóõÊàñÂêûÂö•ÔºèÂëºÂê∏Âõ∞Èõ£ÔºåË´ãÁ´ãÂç≥Â∞±ÈÜ´ÊÄ•Ë®∫„ÄÇ">
                                                Next: contact a dentist within 24‚Äì48 hours. If you have fever, spreading swelling, severe pain, or difficulty swallowing/breathing, seek emergency care.
                                            </li>
                                            <li data-en="Orthodontic planning (aligners/braces) should wait until urgent issues are ruled out or treated."
                                                data-zh="Âú®ÊéíÈô§ÊàñÊ≤ªÁôÇÁ∑äÊÄ•ÁãÄÊ≥ÅÂâçÔºåÁüØÊ≠£Ë¶èÂäÉÔºàÈö±ÂΩ¢ÁâôÂ•óÔºèÂÇ≥Áµ±ÁüØÊ≠£ÔºâÊáâÂÖàÊö´Á∑©„ÄÇ">
                                                Orthodontic planning (aligners/braces) should wait until urgent issues are ruled out or treated.
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="eligibility-banner" id="eligibilityCard">
                                <div class="badge" id="eligibilityBadge">
                                    <span id="eligibilityStatus">...</span>
                                </div>
                                <p id="eligibilityMessage"></p>
                            </div>

                            <div class="metrics-grid" id="treatmentDetails" style="display: none;">
                                <div class="metric-card">
                                    <div class="icon">üìÖ</div>
                                    <div class="data">
                                        <label data-en="Duration" data-zh="ÁôÇÁ®ãÈÄ±Êúü">Duration</label>
                                        <span id="treatmentLength">-</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="icon">üìä</div>
                                    <div class="data">
                                        <label data-en="Aligners" data-zh="ÁâôÂ•óÊï∏Èáè">Aligners</label>
                                        <span id="stageCount">-</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="icon">‚è∞</div>
                                    <div class="data">
                                        <label data-en="Wear Type" data-zh="‰Ω©Êà¥ÊñπÂºè">Wear Type</label>
                                        <span id="wearType">-</span>
                                    </div>
                                </div>
                            </div>

                            <div class="details-section">
                                <h4 data-en="Recommended Corrections" data-zh="Âª∫Ë≠∞‰øÆÊ≠£È†ÖÁõÆ">Recommended Corrections</h4>
                                <div class="tags-cloud" id="correctionsList"></div>
                            </div>

                            <div class="details-section">
                                <h4 data-en="Clinical Assessment" data-zh="Ëá®Â∫äË©ï‰º∞Âª∫Ë≠∞">Clinical Assessment</h4>
                                <ul class="check-list" id="treatmentReasons"></ul>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 3: Photo Scan (4-stage capture) -->
                    <div class="tab-pane" id="tab-3d">
                        <div class="camera-card capture4-card">
                            <div class="video-container">
                                <video id="stageWebcam" autoplay playsinline muted></video>
                                <canvas id="stageOverlay" class="output-canvas"></canvas>
                                
                                <!-- Intelligent HUD Overlay -->
                                <div class="camera-hud">
                                    <div class="hud-top">
                                        <div class="status-badge ready" id="stageReadyBadge">
                                            <span class="status-dot"></span>
                                            <span id="stageReadyText">Align to continue</span>
                                        </div>
                                        <div class="capture-step-badge">
                                            <span id="stageStep">1 of 4</span>
                                        </div>
                                    </div>
                                    <div class="hud-center">
                                        <!-- CV alignment guides drawn on canvas -->
                                    </div>
                                    <div class="hud-bottom">
                                        <!-- Instructions moved to controls area -->
                                    </div>
                                </div>
                            </div>

                            <div class="camera-controls">
                                <div class="stage-instruction-container">
                                    <h3 id="stageTitle">Front Smile</h3>
                                    <p id="stageInstruction">Gently bite on your back teeth and smile as wide as you can.</p>
                                </div>
                                <div class="stage-actions">
                                    <button id="stageRetakeBtn" class="btn-app btn-outline sm">
                                        <span data-en="Retake" data-zh="ÈáçÊãç">Retake</span>
                                    </button>
                                    
                                    <div class="capture-trigger">
                                        <button id="stageCaptureBtn" class="btn-capture" disabled>
                                            <div class="btn-capture-inner"></div>
                                        </button>
                                        <span class="btn-label" data-en="Capture" data-zh="ÊãçÊîù">Capture</span>
                                    </div>

                                    <button id="stageCompleteBtn" class="btn-app btn-primary sm" style="display: none;">
                                        <span data-en="Done" data-zh="ÂÆåÊàê">Done</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Thumbnails Row -->
                        <div class="capture4-thumbs-container">
                            <div class="capture4-thumbs">
                                <button class="thumb-btn active" id="thumb-0">
                                    <img id="thumbImg-0" alt="Front Smile" style="display: none;" />
                                    <span class="thumb-label">FRONT</span>
                                </button>
                                <button class="thumb-btn" id="thumb-1">
                                    <img id="thumbImg-1" alt="Lower Front" style="display: none;" />
                                    <span class="thumb-label">LOWER</span>
                                </button>
                                <button class="thumb-btn" id="thumb-2">
                                    <img id="thumbImg-2" alt="Upper Front" style="display: none;" />
                                    <span class="thumb-label">UPPER</span>
                                </button>
                                <button class="thumb-btn" id="thumb-3">
                                    <img id="thumbImg-3" alt="Side Bite" style="display: none;" />
                                    <span class="thumb-label">SIDE</span>
                                </button>
                            </div>
                        </div>

                        <p class="capture4-hint" data-en="Capture all 4 angles for the best assessment." data-zh="ÊãçÊîù 4 ÂÄãËßíÂ∫¶‰ª•Áç≤ÂæóÊúÄ‰Ω≥Ë©ï‰º∞„ÄÇ">
                            Capture all 4 angles for the best assessment.
                        </p>
                    </div>
                </div>
            </div>
        </main>

        <footer class="app-footer">
            <p>&copy; 2026 Beame AI - <span data-en="Transforming Smiles" data-zh="ÊîπËÆäÁ¨ëÂÆπ">Transforming Smiles</span></p>
        </footer>
    </div>

    <script type="module" src="./main.ts"></script>
    <script>
        // Language switching script inside app.html for fast responsive UI
        const switchAppLanguage = (lang) => {
            document.documentElement.lang = lang;
            localStorage.setItem('beame-language', lang);
            
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });

            document.querySelectorAll('[data-en]').forEach(el => {
                el.textContent = el.getAttribute('data-' + lang);
            });

            // Dispatch event for main.ts to pick up
            window.dispatchEvent(new CustomEvent('languageChanged', { detail: lang }));
        };

        document.getElementById('lang-en').onclick = () => switchAppLanguage('en');
        document.getElementById('lang-zh').onclick = () => switchAppLanguage('zh');

        // Init language
        const savedLang = localStorage.getItem('beame-language') || 'en';
        switchAppLanguage(savedLang);

        // Tab functionality
        function switchTab(tabName) {
            const selectedBtn = document.querySelector('.tab-item[data-tab="' + tabName + '"]');
            if (selectedBtn && selectedBtn.classList.contains('disabled')) return;
            
            document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-item').forEach(b => b.classList.remove('active'));
            
            const pane = document.getElementById('tab-' + tabName);
            if (pane) pane.classList.add('active');
            if (selectedBtn) selectedBtn.classList.add('active');
            
            if (tabName === '3d' && window.initializeStageCapture) {
                setTimeout(() => window.initializeStageCapture(), 100);
            }
        }
    </script>
</body>
</html>
